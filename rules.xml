<rules xmlns="http://namespaces.plone.org/diazo"
    xmlns:css="http://namespaces.plone.org/diazo/css"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <theme href="HWManageStress2.htm" css:if-content="body.template-hw2014_front_page"/>
    <theme href="HWManageStressContent.htm" css:if-content="body.section-intro"/>
    <theme href="HWManageStressSubContent2images.htm" css:if-content="body.two-images" />
    <theme href="HWManageStressSubContentPhotoGalery.htm" css:if-content="body.template-atct_album_view" />
    <theme href="HWManageStressSubContent.htm" css:if-content="div#visual-portal-wrapper" />

    <replace theme="/html/head/base" content="/html/head/base"/>
    <replace theme="/html/head/title" content="/html/head/title"/>

    <!-- Breadcrumbs -->
    <drop css:content="span#breadcrumbs-you-are-here" />
    <replace css:content="span.breadcrumbSeparator">::</replace>
    <replace css:theme-children="div#beadcrumb" css:content-children="div#portal-breadcrumbs" />

    <!-- Language selector -->
    <replace css:theme-children="div#language ul.dropdown-menu" css:content-children="ul#portal-languageselector" />
    <replace css:theme-children="div#language a.dropdown-toggle" css:content-children="ul#portal-languageselector li.currentLanguage a" />

    <!-- Search form -->
    <copy css:theme="form.form-search" css:content="div#portal-searchbox form" attributes="action"/>

    <!-- Navigation tabs -->
    <replace css:theme="ul#portal-globalnav" css:content="ul#portal-globalnav"/>

    <!-- Footer actions -->
    <replace css:theme-children="div#footer ul" css:content-children="ul#portal-siteactions"/>

    <!-- Content title -->
    <!-- Content type-->
    <replace css:theme="div#introducction h1" css:content="h1.documentFirstHeading"/>
    <!-- SubContent type-->
    <replace css:theme="div#content h1" css:content="h1.documentFirstHeading"/>

    <!-- Main Content -->
    <!-- Content type-->
    <replace css:theme-children="div#introtext" css:content-children="div#introtext"/>
    <replace css:theme-children="div#intronavigation" css:content-children="div#intronavigation"/>
    <!-- SubContent type-->
    <replace css:theme-children="div#contentext" css:content-children="div#content-core"/>

    <!-- Content navigation -->
    <replace css:theme="ul#contentnav" css:content="dl.portletNavigationTree ul"/>

    <!-- Frontpage banner -->
    <replace  css:if-content="body.template-hw2014_front_page" css:theme-children="div#banner" css:content="div#banner"/>

    <!-- Frontpage news-events -->
    <replace  css:if-content="body.template-hw2014_front_page" css:theme-children="div.news-events" css:content="div.news-events"/>

    <!-- Frontpage partner logos -->
    <replace css:theme-children="div#frontpage-partners" css:content-children="div#frontpage-partners" />

    <!-- Related sites -->
    <replace css:theme-children="div#relatedSites" css:content-children="div#relatedSites" />

    <!-- See also -->
    <replace css:theme-children="div#seeAlso" css:content-children="div#seeAlso" />

    <!-- Section intro image -->
    <replace css:theme-children="div#intro-image" css:content-children="div#intro-image" />

    <!-- SubSection image -->
    <replace css:theme-children="div#content-image" css:content-children="div#sectionImage" />
    <replace css:theme-children="div#content-image-1" css:content-children="div#sectionImage-1" />
    <replace css:theme-children="div#content-image-2" css:content-children="div#sectionImage-2" />


    <!-- plone.app.toolbar -->
    <before theme-children="/html/body" content="//div[@data-iframe='plone-toolbar']" />
    <before theme-children="/html/head">
        <link rel="stylesheet" type="text/css" href="++resource++plone.app.widgets.css"/>
        <link rel="stylesheet" type="text/css" href="++resource++plone.app.toolbar_init.css"/>
        <link rel="stylesheet" type="text/css" href="++resource++plone.app.toolbar.css"/>
        <script type="text/javascript" src="++resource++plone.app.jquery.js"></script>
        <script type="text/javascript" src="++resource++plone.app.toolbar_init.js"></script>
        <script type="text/javascript" src="++resource++plone.app.toolbar.js"></script>
        <script type="text/javascript" src="++resource++plone.app.widgets.js"></script>
    </before>

    <!-- Photo Gallery images -->
    <drop css:theme-children="ul.thumbnails:last-child" />
    <replace css:theme-children="ul.thumbnails:first-child" css:content="ul.thumbnails li" />
    <!-- Photo Gallery batch navigation -->
    <drop theme="//*[contains(@class, 'pagination')]/ul/li[position()>1 and 7>position()]" />
    <copy css:theme="div.pagination #pagination-previous" css:content="div.listingBar .previous a" attributes="href" />
    <drop css:theme="div.pagination #pagination-previous" css:if-not-content="div.listingBar .previous a" />
    <after css:theme="div.pagination #pagination-previous">
        <xsl:for-each select="//*[contains(@class, 'listingBar')]/span[not(@class='next' or @class='previous')] | //*[contains(@class, 'listingBar')]/a">
            <xsl:if test="name()='a'">
                <li>
                    <xsl:copy-of select="." />
                </li>
            </xsl:if>
            <xsl:if test="name()='span'">
                <li class="active">
                    <xsl:copy-of select="." />
                </li>
            </xsl:if>
        </xsl:for-each>
    </after>
    <copy css:theme="div.pagination #pagination-next" css:content="div.listingBar .next a" attributes="href" />
    <drop css:theme="div.pagination #pagination-next" css:if-not-content="div.listingBar .next a" />

</rules>
